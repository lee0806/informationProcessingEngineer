
### 변수와 메모리

C 언어에서 모든 데이터는 메모리 (컴퓨터의 기억 공간)에 저장된다.
그리고 그 공간에는 주소(Address)가 있다. (몇번째 칸에 저장되어있는가)

```
int a = 10;
```

- a는 변수 이름
- 10은 값
- 메모리 안 어딘가에 저장되고 그 위치가 따로 있다.

### 포인터(pointer)

주소를 저장할 수 있는 변수이다.

보통 변수는 값을 저장하지만, 포인터는 "값이 들어있는 장소의 주소"를 저장한다.

```
int a = 10;
int *p = &a;
```

- &a -> a의 주소
- p -> a의 주소를 저장하는 포인터
- * p -> p가 가리키는 곳의 실제 값 (a의 값)

### 왜 포인터를 써야하나?

C언어는 값을 복사해서 전달하기 때문에, 어떤 함수가 변수의 값을 바꾸려면 주소가 필요하다.

```
void change(int *p) {
	*p = 99;
}

int main() {
	int x = 10;
	change(&x); // 주소 값을 전달
	// 주소 값에 저장된 10의 값이 99로 변환
}
```

즉 주소를 넘겨서 원본을 바꿀 수 있게 하는게 포인터

### 지옥의 포인터의 포인터 (이중 포인터, double pointer)

"포인터를 가리키는 포인터"

**왜 필요할까?**

- 포인터 자체를 바꾸고 싶을 때 (리스트의 첫번째 노드의 값을 함수 안에서 바꾸고 싶을 때 사용)

```
int x= 10;

int *p = &x; // p는 x의 주소를 저장
int *pp = &p; // pp는 p의 주소를 저장
```

### 메모리 공간의 종류

**스택**

저장 시점 : 함수 안에서 선언될 때
자동 소멸 : 함수가 끝나면 자동 삭제

```
void pr() {
	int a;
	int arr[5];
}

```

**힙(Heap)**

저장 시점 : malloc()으로 직접 할당
자동 소멸 : free()로 직접 해제해야 함

```
int *p = malloc(sizeof(int)); 
// int의 사이즈 만큼 주소 할당
```

**데이터 영역**

저장 시점 : 전역 변수 저장
자동 소멸 : 프로그램 종료 시 삭제

**malloc()과 free()**

C에서는 실행 중 필요한 만큼 메모리를 빌릴 수 있다.

```
int *p = (int*)malloc(sizeof(int));
*p = 100;
free(p);
```

malloc() -> 힙에서 공간을 빌림
free() -> 빌린 공간을 반납
sizeof() -> 자료형의 크기 (int는 4바이트)

**free()를 하지 않으면 메모리 누수가 발생함**

### 구조체

서로 관련된 데이터들을 하나로 묶을 때 사용

```
struct Student {
	int id;
	char name[20];
};
```

Studet라는 구조는 id와 name으로 이루어짐

**구조체 생성**

```
struct Student s1;
s1.id = 1;
strcpy(s1.name, "철수");
```

**typedef**

구조체 이름이 길때

```
typedef struct Student {
	int id;
	char name[20];
} Student;
```

struct Student 대신 Student만 사용해도됨

### 연결리스트

배열처럼 "붙어 있는 데이터"가 아닌 각 노드가 다음 노드의 주소를 알고 하나씩 따라가며 연결되어 있는 구조

```
[1 | next] -> [2 | next] -> [3 | null]
```

용어 정리

head : 첫 번째 노드의 주소
next : 다음 노드의 주소
null : 다음 노드가 없음 (리스트의 끝)

### 구초제 안에 포인터 (연결리스트)

구조체 안에 자기 자신을 가리키는 포인터를 넣으면 연결리스트의 형태를 띄게됨

```
typedef struct Node {
	int value;
	struct Node *next;
} Node;
```

**화살표 연산자 (->)**

구조체 포인터에서 내부 변수에 접근할 때 사용

```
Node n1;
Node *p = &n1;

p -> value = 10; // (*p).value와 같음, 10 저장
p -> next = NULL;
```

**포인터로 구조체 연결**

```
Node n1, n2;
n1.value = 10;
n1.next = &n2; // n1이 n2의 주소를 저장
n2.value = 20;
n2.next = NULL;
```

이러면 value가 10 -> 20 -> NULL로 동작

