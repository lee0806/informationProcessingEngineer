### 논리 데이터 저장소 확인

**논리 데이터 모델 검증**

**논리 데이터 모델링**

데이터베이스 설계 프로세스의 기초 설계 단계로 비즈니스 정보의 구조와 규칙을 명확하게 표현할 수 있는 기법, 개념 모델로부터 업무 영역, 업무 데이터 및 규칙을 구체적으로 표현한 모델

**논리 데이터 모델링 특성**

- 포용성
- 정규화
- 완전성
- 독립성

**논리 데이터 모델링 속성**

- 개체
- 속성
- 관계

**개체-관계 모델**

현실 세계에 존재하는 데이터와 그들 간의 관계를 사람이 이해할 수 있는 형태로 명확하게 표현하기 위해 가장 널리 사용하고 있는 모델. 개체, 속성, 관계로 기술한 모델



### 정규화

관계형 데이터베이스의 설계에서 중복을 최소화하여 데이터를 구조화하는 프로세스

**이상 현상**

데이터의 중복성으로 인해 릴레이션을 조작할 때 발생하는 비합리적 현상

**데이터베이스 이상 현상**

- 삽입 이상
- 삭제 이상
- 갱신 이상

(삽살개)

**정규화의 단계**

- 1정규화 : 원자값으로 구성
- 2정규화 : 부분 함수 종속 제거
- 3정규화 : 이행 함수 종속 제거
- 보이스-코드 정규화(BCNF) : 결정자 함수이면서 후보키가 아닌 것 제거
- 4정규화 : 다치 종속 제거
- 5정규화 : 조인 종속성 제거

### 정규화의 예시

**1정규화**

- 한 컬럼에는 "하나의 값"만 들어가야 한다
- 반복되는 그룹이나, 다중 값이 있으면 안된다

예시

```
고객 ID    이름    전화번호
1         홍길동  010-1234-1234, 010-1232-3231
2         이순신  010-4242-2323
```

-> 전화번호에 두개의 값이 들어감 = 비원자적

정규화 이후 

```
고객 ID    이름    전화번호
1         홍길동  010-1234-1234
1         홍길동  010-1232-3231
2         이순신  010-4242-2323
```

-> 전화번호가 한 행당 하나의 값만 가짐 = 1정규화 완료


**2정규화**

- 복합키 (두 개 이상의 컬럼으로 구성된 기본키)의 일부에만 종속된 속성이 있으면 제거한다.

|**학생ID**|**과목명**|**담당교수**|**성적**|
|---|---|---|---|
|1|DB|김교수|A|
|1|OS|박교수|B|

- 기본 키 : 학생 ID, 과목명
- 담당 교수는 과목명에만 의존 -> 부분 함수 종속이 존재함(담당 교수는 과목명에만 의존하는데 또다른 기본키인 학생 ID는 필요없음)

테이블 1 : 수강 정보

| **학생ID** | **과목명** | **성적** |
| -------- | ------- | ------ |
| 1        | DB      | A      |
| 1        | OS      | B      |
테이블 2 : 과목 정보

|**과목명**|**담당교수**|
|---|---|
|DB|김교수|
|OS|박교수|

-> 부분 함수 종속 제거 = 2정규화 완료

**3정규화**

- 기본키가 아닌 속성이 다른 일반 속성에 의해 종속되는걸 제거한다.

|**학번**|**학생이름**|**학과코드**|**학과명**|
|---|---|---|---|
|1|홍길동|C01|컴퓨터공학|
|2|이순신|C02|기계공학|
- 학과명은 학과코드에 의해 결정됨
- 즉 학번 -> 학과코드 -> 학과명 (학과명이 학번과 이행 종속, 즉 2번에 걸쳐 연결되어 있음)
- 학과명이 학번에 이행 종속되어 있음

학생 테이블

|**학번**|**학생이름**|**학과코드**|
|---|---|---|
|1|홍길동|C01|
|2|이순신|C02|

학과 테이블

|**학과코드**|**학과명**|
|---|---|
|C01|컴퓨터공학|
|C02|기계공학|

-> 학과명과 학번의 이행 종속을 제거 (서로 다른 테이블로 구현하여 이행 종속을 제거)

**보이스-코드 정규화 (BCNF) - 결정자가 후보키가 아닌 것을 제거**

- 결정자 (다른 속성을 결정하는 속성)가 후보키가 아닌 경우 제거한다 (모든 결정자는 후보키여야 한다.)

|**강의**|**교수**|**교재**|
|---|---|---|
|DB|김교수|DB기초|
|OS|박교수|운영체제입문|
|DB|이교수|DB기초|
- 한 강의에 여러 교수가 있을 수 있고
- 교재는 강의에 의해 결정됨
- 그러나 교수도 강의를 결정할 수 있음 -> 결정자가 후보키가 아님

강의-교수 테이블

| **강의** | **교수** |
| ------ | ------ |
| DB     | 김교수    |
| DB     | 이교수    |
| OS     | 박교수    |

강의-교재 테이블

|**강의**|**교재**|
|---|---|
|DB|DB기초|
|OS|운영체제입문|

- 후보키가 아닌 결정자를 제거 -> BCNF 완료

**4정규화(4NF) - 다치 종속 제거**

- 한 키에 대해 서로 독립적인 여러 값의 종속 관계가 존재할 때 분리한다. (하나의 키가 여러 속성 집합에 각각 종속될 때)

|**학생**|**자격증**|**동아리**|
|---|---|---|
|홍길동|정보처리기사|밴드|
|홍길동|정보처리기사|축구|
|홍길동|컴활|밴드|
|홍길동|컴활|축구|

- 학생이 자격증과 동아리 2개의 종속 관계를 가지고 있음
- 이는 두 종속이 서로 독립적인 다치 종속임

학생-자격증 테이블

|**학생**|**자격증**|
|---|---|
|홍길동|정보처리기사|
|홍길동|컴활|

학생-동아리 테이블

| **학생** | **동아리** |
| ------ | ------- |
| 홍길동    | 밴드      |
| 홍길동    | 축구      |

- 독립된 다치 종속을 분리 -> 4정규화 완료


**5정규화 (5NF) - 조인 종속성 제거**

- 데이터를 여러 테이블로 분리했을 때 조인으로 다시 합쳤을 때 원래 데이터가 완전히 복원되지 않는 문제가 생기면 분리 기준을 다시 조정해야됨


|**프로젝트**|**부서**|**직원**|
|---|---|---|
|A|개발|홍길동|
|A|디자인|김철수|
|B|개발|이영희|

- 여기서 프로젝트별, 부서별, 직원별 관계가 복잡하게 얽혀있어 조인할 때 데이터 중복이나 손실이 발생할 수 있음 -> 조인 종속에 문제가 존재

정규화

- 프로젝트-부서 테이블
- 부서-직원 테이블
- 프로젝트-직원 테이블

- 분리하여 각각의 관계를 명확히 유지하면 5정규화 완료


### 물리 데이터 모델 설계

**물리 데이터 모델링**

논리 모델을 적용하고자 하는 기술에 맞도록 상세화 해가는 과정

**물리 데이터 모델링 변환 절차**

- 개체를 테이블로 변환
- 속성을 컬럼으로 변환
- UID를 기본키로 변환
- 관계를 외래키로 변환
- 칼럼 유형과 길이를 정의
- 반 정규화 진행

**물리 데이터 저장소 구성**

DBMS를 선정한 이후의 활동 (PostgreSQL, MySQL, MS 등등)

**참조 무결성 제약 조건**

릴레이션과 릴레이션 사이에 대해 참조의 일관성을 보장하기 위한 조건
참조하는 외래키가 참조되는 릴레이션에 기본키로 존재


**파티션의 종류**

- 레인지 파티셔닝 : 연속적인 숫자나 날짜를 기준으로 하는 파티셔닝 기법
- 해시 파티셔닝 : 파티션 키의 해시 함수 값에 의한 파티셔닝 기법
- 리스트 파티셔닝 : 특정 파티션에 저장 될 데이터에 대한 명시적 제어가 가능한 파티셔닝 기법
- 컴포지트 파티셔닝 : 범위 분할 이후 해시 함수를 적용하여 재분할 하는 파티셔닝 기법

**파티션의 장점**

- 성능 향상
- 가용성 향상
- 백업 가능
- 경합 감소

### 데이터 조작 프로시저 성능 개선

**옵티마이저**

SQL을 가장 빠르고 효율적으로 수행할 최적의 처리 경로를 생성해주는 DBMS 내부의 핵심 엔진, 옵티마이저가 생성한 SQL 처리 경로를 실행 계획이라고 부름

**옵티마이저 유형**

- RBO (규칙 기반 옵티마이저) : 통계 정보가 없는 상태에서 사전 등록된 규칙에 따라 질의 실행 계획을 선택하는 옵티마이저
- CBO (비용기반 옵티마이저) : 통계 정보로부터 모든 접근 경로를 고려한 질의 실행 계획을 선택하는 옵티마이저

**SQL 수행 시 옵티마이저의 역할**

- 쿼리 반환
- 비용 산정
- 계획 생성